<!doctype html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><title>Hello WebXR!</title><script src="https://unpkg.com/three@0.126.0/build/three.js"></script><script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script><script defer="defer" src="bundle.ef46db3751d8e999.js"></script></head><body><button onclick="activateXR()">Start Hello WebXR</button><script>async function activateXR(){const e=document.createElement("canvas");document.body.appendChild(e);const t=e.getContext("webgl",{xrCompatible:!0}),r=new THREE.Scene,a=new THREE.DirectionalLight(16777215,.3);a.position.set(10,15,10),r.add(a);const i=new THREE.WebGLRenderer({alpha:!0,preserveDrawingBuffer:!0,canvas:e,context:t});i.autoClear=!1;const n=new THREE.PerspectiveCamera;n.matrixAutoUpdate=!1;const s=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"]});s.updateRenderState({baseLayer:new XRWebGLLayer(s,t)});const o=await s.requestReferenceSpace("local"),c=await s.requestReferenceSpace("viewer"),d=await s.requestHitTestSource({space:c}),l=new THREE.GLTFLoader;let m,p;l.load("https://immersive-web.github.io/webxr-samples/media/gltf/reticle/reticle.gltf",(function(e){m=e.scene,m.visible=!1,r.add(m)})),l.load("https://immersive-web.github.io/webxr-samples/media/gltf/sunflower/sunflower.gltf",(function(e){p=e.scene})),s.addEventListener("select",(e=>{if(p){const e=p.clone();e.position.copy(m.position),r.add(e)}}));const f=(e,a)=>{s.requestAnimationFrame(f),t.bindFramebuffer(t.FRAMEBUFFER,s.renderState.baseLayer.framebuffer);const c=a.getViewerPose(o);if(c){const e=c.views[0],t=s.renderState.baseLayer.getViewport(e);i.setSize(t.width,t.height),n.matrix.fromArray(e.transform.matrix),n.projectionMatrix.fromArray(e.projectionMatrix),n.updateMatrixWorld(!0);const l=a.getHitTestResults(d);if(l.length>0&&m){const e=l[0].getPose(o);m.visible=!0,m.position.set(e.transform.position.x,e.transform.position.y,e.transform.position.z),m.updateMatrixWorld(!0)}i.render(r,n)}};s.requestAnimationFrame(f)}</script></body></html>